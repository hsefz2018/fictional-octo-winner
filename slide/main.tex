\documentclass[UTF8]{beamer}

\usetheme{Madrid}
\usecolortheme{crane}

\usepackage[english]{babel}
\usepackage{ctex}
\usepackage{algorithm,algorithmic}
\usepackage{tabularx}

\begin{document}

\title{SHTSC 2016 简要题解}
\author{CyanD1317 / sweetcane}
\frame{\titlepage}

%%%%%%%%%%%%%%%%%%%%%%%% Day 1 A %%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Problem 1. Robot}
[Touhou Contest by Nettle, Stage 1 A]

东风谷早苗入手了最新款的 Gundam 模型机器人。

机器人可以按照输入的命令向“E”、“S”、“W”、“N”四个方向进行移动。对于一个命令串，
每一秒机器人按顺序执行其中一个命令，到结尾处会自动从头循环。

在 0 时刻时早苗将机器人放置在了 (0,0) 的位置，并且输入了命令串 $S$。
她想要知道 $T$ 秒后机器人所在的位置坐标。

\end{frame}

\begin{frame}{Problem 1. Robot}

\textbf{输入}
\begin{itemize}
    \item 第 1 行：命令串 $S$
    \item 第 2 行：正整数 $T$
\end{itemize}
\textbf{输出}
\begin{itemize}
    \item 第 1 行：结束时的位置 $(X, Y)$
\end{itemize}

\begin{tabularx}{\textwidth}{|X|X|}
\hline
\texttt{\textbf{robot.in}} & \texttt{\textbf{robot.out}} \\ \hline
\texttt{NSWWNSNEEWN}\newline
\texttt{12}
&
\texttt{-1 3}
\\ \hline
\end{tabularx}
\newline
\begin{itemize}
    \item 60 pts: $T \leq 500\,000, |S| \leq 5\,000$
    \item 100 pts: $T \leq 2\,000\,000\,000, |S| \leq 5\,000$
\end{itemize}

\end{frame}

\begin{frame}{Solution}

→ [NOIP 2014] 生活大爆炸版石头剪刀布

\begin{itemize}
    \item Algorithm 1 \\
        直接模拟，时间复杂度 $O(T)$，可以得到 60 分。
    \pause
    \item Algorithm 2 \\
        计算整个串执行一遍之后的坐标变化量。 \\
        总共执行了 $\lfloor T / |S| \rfloor$ 次整个串，剩余 $T \mod |S|$ 个命令直接模拟。 \\
        时间复杂度 $O(|S|)$，可以得到 100 分。
\end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%% Day 1 B %%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Problem 2. Ice}
[Touhou Contest by Nettle, Stage 1 C]

琪露诺玩速冻青蛙的时候有一只青蛙逃到了河的对岸。于是琪露诺决定到对岸去追青蛙。

小河可以看作一列格子，依次编号为 0 到 $N$，开始时琪露诺在编号 0 的格子上。
因为琪露诺是笨蛋，在格子 $i$ 时，她只会移动到 $[i+L, i+R]$ 中的一格。
她的位置编号大于 $N$ 时，就算到达对岸。

0 到 $N$ 中的每一个格子都有一个冰冻指数 $A_i$。当琪露诺停留在一格时就可以得到那一格的冰冻指数。
琪露诺希望能够在到达对岸时获取最大的冰冻指数。

\end{frame}

\begin{frame}{Problem 2. Ice}

\textbf{输入}
\begin{itemize}
    \item 第 1 行：$N$，$L$，$R$
    \item 第 2 行：$N+1$ 个整数 $A_{0 \dots N}$
\end{itemize}
\textbf{输出}
\begin{itemize}
    \item 第 1 行：最大的冰冻指数
\end{itemize}

\begin{tabularx}{\textwidth}{|X|X|}
\hline
\texttt{\textbf{ice.in}} & \texttt{\textbf{ice.out}} \\ \hline
\texttt{5 2 3}\newline
\texttt{0 12 3 11 7 -2}
&
\texttt{11}
\\ \hline
\end{tabularx}
\newline
\begin{itemize}
    \item 60 pts: $N \leq 10\,000$
    \item 100 pts: $N \leq 200\,000, |A_i| \leq 1000, 1 \leq L \leq R \leq N$
\end{itemize}

\end{frame}

\begin{frame}{Solution}

\begin{itemize}
    \only<1-> {\item Algorithm 1 \\
        用 $f[i]$ 表示跳到格子 $i$ 并停留所获得的最大冰冻指数。
        \pause
        \begin{equation*}
            f[i] =
            \begin{cases}
                \max_{i-R \leq p \leq i-L} \{ f[p] \} + A[i] &\mbox{if $i \geq L$} \\
                0   &\mbox{if $0 \leq i \le L$}
            \end{cases}
        \end{equation*}
        \pause
        $\max_{N-R \leq i \leq N} \{ f[i] \}$ 即为答案。 \\
        \pause
        状态数 $O(N)$，转移 $O(N)$，时间复杂度 $O(N^2)$，可以得到 60 分。}
    \only<1-5> {\uncover<5> {\item Algorithm 2 \\
        max 部分利用线段树查询，计算出 $f[i]$ 的值后直接插入线段树。 \\
        转移降为 $O(\log N)$，时间复杂度 $O(N \log N)$，可以得到 100 分。 \\　}}
    \only<6> {\item Algorithm 3 \\
        利用单调队列维护 $[i-R, i]$ 之间的 $f$ 值。 \\
        由于每个 $f$ 只会入队/出队一次，时间复杂度 $O(N)$ \\然而还是只有 100 分 =。=}
\end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%% Day 1 C %%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Problem 3. Desired}

[BZOJ 3143] [HNOI 2013]

一个无向连通图，顶点从 1 编号到 $N$，边从 1 编号到 $M$。

在该图上进行随机游走，初始时在 1 号顶点，每一步以相等的概率随机选择当前顶点的某条边，
沿着这条边走到下一个顶点，获得等于这条边的编号的分数。当到达 $N$ 号顶点时游走结束。
现在，请你对这 $M$ 条边进行编号，最小化总分的期望值。

\end{frame}

\begin{frame}{Problem 3. Desired}

\textbf{输入}
\begin{itemize}
    \item 第 1 行：$N$，$M$
    \item 接下来 $M$ 行：每行描述一条无向边 $u, v$。
\end{itemize}
\textbf{输出}
\begin{itemize}
    \item 第 1 行：最小的期望值，保留 3 位小数
\end{itemize}

\begin{tabularx}{\textwidth}{|X|X|}
\hline
\texttt{\textbf{desired.in}} & \texttt{\textbf{desired.out}} \\ \hline
\texttt{3 3}\newline
\texttt{2 3}\newline
\texttt{1 2}\newline
\texttt{1 3}
&
\texttt{3.333}
\\ \hline
\end{tabularx}
\newline
\begin{itemize}
    \item 30 pts: $2 \leq N \leq 10$
    \item 100 pts: $2 \leq N \leq 500$
\end{itemize}

\end{frame}

\end{document}
